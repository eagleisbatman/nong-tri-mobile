appId: com.nongtri.app
name: Basic Chat Flow - Test messaging and streaming
---
# Test basic chat functionality with streaming using test tags
# Video recording is automatic when using: maestro test --format html

- launchApp
- takeScreenshot: "01_app_launched"

# Verify main chat screen loads
- assertVisible:
    id: "chat_screen"
- takeScreenshot: "02_chat_screen_loaded"

# Verify welcome card appears for new users
- assertVisible:
    id: "welcome_card"
- takeScreenshot: "03_welcome_card"

# Test sending a simple greeting using text_field tag
- tapOn:
    id: "text_field"
- inputText: "Hello"
- takeScreenshot: "04_message_typed"

# Send message using send_button tag
- tapOn:
    id: "send_button"
- takeScreenshot: "05_message_sent"

# Wait for AI response in message_list
- waitForAnimationToEnd
- assertVisible:
    id: "message_list"
- takeScreenshot: "06_ai_response_received"

# Test auto-scroll behavior - send another message
- tapOn:
    id: "text_field"
- inputText: "Tell me about farming"
- takeScreenshot: "07_second_message_typed"

- tapOn:
    id: "send_button"
- takeScreenshot: "08_second_message_sent"

# Verify streaming and auto-scroll
- waitForAnimationToEnd
- assertVisible:
    id: "message_list"
- takeScreenshot: "09_second_response"

# Test starter question if available
- extendedWaitUntil:
    visible:
      id: "starter_question_0"
    timeout: 3000
- tapOn:
    id: "starter_question_0"
    optional: true
- takeScreenshot: "10_starter_question_clicked"

# Take final screenshot for review
- takeScreenshot: "11_conversation_complete"