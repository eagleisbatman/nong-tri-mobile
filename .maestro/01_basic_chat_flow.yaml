appId: com.nongtri.app
name: Basic Chat Flow - Test messaging and streaming
---
# Test basic chat functionality with streaming
# Video recording is automatic when using: maestro test --format html

- launchApp
- takeScreenshot: "01_app_launched"

# Wait for app to fully load
- assertVisible:
    text: "Nông Trí"
- takeScreenshot: "02_home_screen"

# Test sending a simple greeting
- tapOn:
    id: "text_field"
- inputText: "Hello"
- takeScreenshot: "03_message_typed"
- tapOn:
    id: "send_button"
- takeScreenshot: "04_message_sent"

# Wait for AI response to start streaming
- waitForAnimationToEnd
- assertVisible:
    text: ".*Nông Trí.*"  # AI should introduce itself
- takeScreenshot: "05_ai_response_received"

# Test auto-scroll behavior - send another message
- tapOn:
    id: "text_field"
- inputText: "What's the weather today?"
- takeScreenshot: "06_second_message_typed"
- tapOn:
    id: "send_button"

# Verify streaming and auto-scroll
- waitForAnimationToEnd
- assertVisible:
    text: ".*weather.*|.*Weather.*"
- takeScreenshot: "07_weather_response"

# Test follow-up questions if they appear
- extendedWaitUntil:
    visible:
      text: ".*7-day.*|.*forecast.*"
    timeout: 5000

# Take final screenshot for review
- takeScreenshot: "08_conversation_complete"